<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íˆ¬ì–´íŒ¨ìŠ¤ì‚¬ì—…ë¶€ 2025 ì›Œí¬ìƒµ | TRAVEL SHIFT</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .app-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .app-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .app-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .app-subtitle {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .status-bar {
            background: #f8f9fa;
            padding: 10px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .connection-status {
            display: flex;
            align-items: center;
            font-size: 0.8em;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .status-online { background: #28a745; }
        .status-offline { background: #dc3545; }

        .main-content {
            padding: 20px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .menu-item {
            background: white;
            border: 1px solid #eee;
            border-radius: 12px;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: left 0.3s ease;
            z-index: 0;
        }

        .menu-item.active::before {
            left: 0;
        }

        .menu-item.active {
            color: white;
        }

        .menu-item.active .menu-icon {
            -webkit-text-fill-color: white;
            color: white;
        }

        .menu-item > * {
            position: relative;
            z-index: 1;
        }

        .menu-item:hover:not(.active) {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .menu-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #667eea;
        }

        .menu-title {
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .menu-desc {
            font-size: 0.7em;
            color: #666;
            line-height: 1.4;
        }

        .google-login {
            background: white;
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .login-btn {
            width: 100%;
            background: #4285f4;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px;
            font-size: 0.9em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .login-btn:hover {
            background: #3367d6;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .user-details h4 {
            font-size: 0.9em;
            margin-bottom: 2px;
        }

        .user-details p {
            font-size: 0.7em;
            color: #666;
        }

        .app-translate {
            background: white;
            border: 1px solid #eee;
            border-radius: 12px;
            padding: 15px;
            margin-top: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 12px;
            padding: 20px;
            max-width: 350px;
            width: 90%;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
            color: #666;
        }

        .participants-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .participant-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .participant-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8em;
            font-weight: 600;
        }

        .mbti-test {
            padding: 20px;
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-number {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 1em;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .answer-btn {
            background: white;
            border: 2px solid #eee;
            border-radius: 8px;
            padding: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .answer-btn:hover {
            border-color: #667eea;
            background: #f0f0ff;
        }

        .answer-btn.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #eee;
            border-radius: 2px;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .schedule-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .link-item:hover {
            background: #f8f9fa;
        }

        .material-item:hover {
            background: #f0f0ff;
            border-color: #667eea;
        }

        @media (max-width: 480px) {
            .app-container {
                max-width: 100%;
            }
            
            .menu-grid {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            
            .menu-item {
                padding: 15px 10px;
            }
            
            .menu-icon {
                font-size: 2em;
            }
            
            .menu-title {
                font-size: 0.8em;
            }
            
            .menu-desc {
                font-size: 0.6em;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="app-header">
            <div class="app-title">íˆ¬ì–´íŒ¨ìŠ¤ì‚¬ì—…ë¶€ 2025 ì›Œí¬ìƒµ</div>
            <div class="app-subtitle">TRAVEL SHIFT</div>
        </div>

        <div class="status-bar">
            <div class="connection-status">
                <div class="status-dot" id="connectionDot"></div>
                <span id="connectionText">ì—°ê²° í™•ì¸ ì¤‘...</span>
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <div id="lastSync">ë™ê¸°í™”: -</div>
                <button onclick="syncData()" style="background: none; border: none; color: #667eea; cursor: pointer; font-size: 1.1em;" title="ë°ì´í„° ë™ê¸°í™”">
                    ğŸ”„
                </button>
            </div>
        </div>

        <div class="main-content">
            <div class="google-login" id="loginSection">
                <button class="login-btn" id="googleLoginBtn">
                    <i class="fab fa-google"></i>
                    ì´ë¦„ìœ¼ë¡œ ë¡œê·¸ì¸
                </button>
                <p style="font-size: 0.8em; color: #666; margin-top: 10px; text-align: center;">
                    ì›Œí¬ìƒµ ì°¸ì—¬ë¥¼ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤
                </p>
            </div>

            <div class="user-info" id="userInfo" style="display: none;">
                <div class="user-avatar" id="userAvatar">U</div>
                <div class="user-details">
                    <h4 id="userName">ì‚¬ìš©ì</h4>
                    <p id="userEmail">user@example.com</p>
                </div>
            </div>

            <div class="menu-grid" id="mainMenu" style="display: none;">
                <div class="menu-item" onclick="openModal('participantsModal')" data-action="participants">
                    <div class="menu-icon">ğŸ‘¥</div>
                    <div class="menu-title">ì°¸ê°€ì í˜„í™©</div>
                    <div class="menu-desc">ì‹¤ì‹œê°„ ì°¸ê°€ì ì •ë³´ í™•ì¸</div>
                </div>

                <div class="menu-item" onclick="openScheduleOptions()" data-action="schedule">
                    <div class="menu-icon">ğŸ“…</div>
                    <div class="menu-title">ì›Œí¬ìƒµ ì¼ì •</div>
                    <div class="menu-desc">ìƒì„¸ ì¼ì • ë° í”„ë¡œê·¸ë¨</div>
                </div>

                <div class="menu-item" onclick="startMBTITest()" data-action="mbti">
                    <div class="menu-icon">ğŸ§ </div>
                    <div class="menu-title">MBTI ê²€ì‚¬</div>
                    <div class="menu-desc">ì„±ê²© ìœ í˜• ê²€ì‚¬ ì‹¤ì‹œ</div>
                </div>

                <div class="menu-item" onclick="openTourpassTicket()" data-action="ticket">
                    <div class="menu-icon">ğŸ«</div>
                    <div class="menu-title">ì‚¬ìš© ì¤‘ì¸ íˆ¬ì–´íŒ¨ìŠ¤ ì—´ê¸°</div>
                    <div class="menu-desc">ì§€ì •ëœ íˆ¬ì–´íŒ¨ìŠ¤ ë§í¬ ì—°ê²°</div>
                </div>

                <div class="menu-item" onclick="openModal('surveyModal')" data-action="survey">
                    <div class="menu-icon">ğŸ“</div>
                    <div class="menu-title">ì„¤ë¬¸ì¡°ì‚¬</div>
                    <div class="menu-desc">ì›Œí¬ìƒµ ë§Œì¡±ë„ ì¡°ì‚¬</div>
                </div>

                <div class="menu-item" onclick="openModal('tourpassBoxModal')" data-action="tourpassbox">
                    <div class="menu-icon">ğŸ“¦</div>
                    <div class="menu-title">íˆ¬ì–´íŒ¨ìŠ¤ ë³´ê´€í•¨</div>
                    <div class="menu-desc">ê°œì¸ ë§í¬ ì €ì¥ì†Œ</div>
                </div>
            </div>

            <div class="app-translate">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h4>ğŸŒ ì•± ë²ˆì—­í•˜ê¸°</h4>
                    <select id="languageSelect" onchange="translateApp()" style="padding: 5px; border-radius: 4px; border: 1px solid #ddd;">
                        <option value="ko">í•œêµ­ì–´</option>
                        <option value="en">English</option>
                        <option value="ja">æ—¥æœ¬èª</option>
                        <option value="zh">ä¸­æ–‡</option>
                    </select>
                </div>
                <div style="font-size: 0.8em; color: #666;">
                    ì–¸ì–´ë¥¼ ì„ íƒí•˜ë©´ ì•± ì „ì²´ê°€ ë²ˆì—­ë©ë‹ˆë‹¤
                </div>
            </div>
        </div>
    </div>

    <!-- ì°¸ê°€ì í˜„í™© ëª¨ë‹¬ -->
    <div class="modal" id="participantsModal">
        <div class="modal-content" style="max-width: 90%; max-height: 80%;">
            <button class="close-btn" onclick="closeModal('participantsModal')">&times;</button>
            <div class="modal-header">
                <h3>ì°¸ê°€ì í˜„í™©</h3>
            </div>
            <div style="padding: 20px;">
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <button onclick="showParticipantsList()" id="participantsTab" class="tab-btn active" style="background: #667eea; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                        ğŸ‘¥ ì°¸ê°€ì ëª©ë¡
                    </button>
                    <button onclick="showRockPaperScissors()" id="gameTab" class="tab-btn" style="background: #f8f9fa; color: #333; border: 1px solid #ddd; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                        âœ‚ï¸ ê°€ìœ„ë°”ìœ„ë³´
                    </button>
                </div>
                
                <!-- ì°¸ê°€ì ëª©ë¡ -->
                <div id="participantsContent">
                    <div class="participants-list" id="participantsList">
                        <div class="participant-item">
                            <div class="participant-avatar">ë‚¨</div>
                            <div>
                                <div><strong>ë‚¨ë„í˜„</strong></div>
                                <div style="font-size: 0.8em; color: #666;">íˆ¬ì–´íŒ¨ìŠ¤ì‚¬ì—…ë¶€ ì´ì‚¬</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ -->
                <div id="gameContent" style="display: none;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <h4>ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„</h4>
                        <p style="color: #666; font-size: 0.9em;">ì°¸ê°€ìë¥¼ ì„ íƒí•˜ì—¬ ê°€ìœ„ë°”ìœ„ë³´ë¥¼ í•´ë³´ì„¸ìš”!</p>
                    </div>
                    
                    <!-- ìƒëŒ€ë°© ì„ íƒ -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 500;">ëŒ€ì „ ìƒëŒ€ ì„ íƒ:</label>
                        <select id="opponentSelect" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="">ìƒëŒ€ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>
                    
                    <!-- ê²Œì„ ì˜ì—­ -->
                    <div id="gameArea" style="display: none;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <div style="text-align: center;">
                                <div style="font-weight: 600;">ë‚˜</div>
                                <div style="font-size: 4em; margin: 10px 0;" id="myChoice">â“</div>
                                <div id="myName" style="font-size: 0.9em; color: #666;"></div>
                            </div>
                            
                            <div style="text-align: center;">
                                <div style="font-size: 2em; color: #667eea;">VS</div>
                            </div>
                            
                            <div style="text-align: center;">
                                <div style="font-weight: 600;">ìƒëŒ€</div>
                                <div style="font-size: 4em; margin: 10px 0;" id="opponentChoice">â“</div>
                                <div id="opponentName" style="font-size: 0.9em; color: #666;"></div>
                            </div>
                        </div>
                        
                        <!-- ì„ íƒ ë²„íŠ¼ë“¤ -->
                        <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 20px;" id="choiceButtons">
                            <button onclick="makeChoice('rock')" style="background: #f8f9fa; border: 2px solid #ddd; border-radius: 8px; padding: 15px; cursor: pointer; font-size: 2em;">
                                âœŠ
                            </button>
                            <button onclick="makeChoice('paper')" style="background: #f8f9fa; border: 2px solid #ddd; border-radius: 8px; padding: 15px; cursor: pointer; font-size: 2em;">
                                âœ‹
                            </button>
                            <button onclick="makeChoice('scissors')" style="background: #f8f9fa; border: 2px solid #ddd; border-radius: 8px; padding: 15px; cursor: pointer; font-size: 2em;">
                                âœŒï¸
                            </button>
                        </div>
                        
                        <!-- ê²°ê³¼ í‘œì‹œ -->
                        <div id="gameResult" style="display: none; text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px; margin-bottom: 15px;">
                            <div id="resultText" style="font-size: 1.2em; font-weight: 600; margin-bottom: 10px;"></div>
                            <div id="resultDetail" style="color: #666;"></div>
                        </div>
                        
                        <!-- ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ -->
                        <div style="text-align: center;">
                            <button onclick="resetGame()" style="background: #667eea; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                                ğŸ”„ ë‹¤ì‹œ í•˜ê¸°
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MBTI ê²€ì‚¬ ëª¨ë‹¬ -->
    <div class="modal" id="mbtiModal">
        <div class="modal-content" style="max-width: 90%; max-height: 80%;">
            <button class="close-btn" onclick="closeMBTITest()">&times;</button>
            <div class="mbti-test">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                </div>
                <div class="question-card">
                    <div class="question-number" id="questionNumber">ì§ˆë¬¸ 1/10</div>
                    <div class="question-text" id="questionText">
                        ìƒˆë¡œìš´ ì‚¬ëŒì„ ë§Œë‚¬ì„ ë•Œ
                    </div>
                    <div class="answer-options" id="answerOptions">
                        <button class="answer-btn" onclick="selectAnswer(0)">
                            ë¨¼ì € ë‹¤ê°€ê°€ì„œ ì§ˆë¬¸ì„ ë˜ì§€ê³  ë¶„ìœ„ê¸°ë¥¼ ì£¼ë„í•œë‹¤
                        </button>
                        <button class="answer-btn" onclick="selectAnswer(1)">
                            ìƒëŒ€ê°€ ë¨¼ì € ë‹¤ê°€ì˜¤ê¸¸ ê¸°ë‹¤ë¦¬ë©° ê´€ì°°í•œë‹¤
                        </button>
                    </div>
                </div>
                <button id="nextBtn" onclick="nextQuestion()" style="display: none; background: #667eea; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; margin-top: 20px;">
                    ë‹¤ìŒ ì§ˆë¬¸
                </button>
            </div>
        </div>
    </div>

    <!-- ì„¤ë¬¸ì¡°ì‚¬ ëª¨ë‹¬ -->
    <div class="modal" id="surveyModal">
        <div class="modal-content" style="max-width: 90%; max-height: 80%;">
            <button class="close-btn" onclick="closeModal('surveyModal')">&times;</button>
            <div class="modal-header">
                <h3>ì›Œí¬ìƒµ ë§Œì¡±ë„ ì¡°ì‚¬</h3>
            </div>
            <div style="padding: 20px; max-height: 400px; overflow-y: auto;">
                <div id="surveyForm">
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 500;">ì „ì²´ì ì¸ ë§Œì¡±ë„</label>
                        <input type="range" id="satisfaction" min="1" max="5" value="3" style="width: 100%;" oninput="document.getElementById('satisfactionValue').textContent = this.value">
                        <div style="text-align: center; margin-top: 5px;">
                            <span id="satisfactionValue">3</span>/5
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 500;">ê°€ì¥ ë§Œì¡±í–ˆë˜ í™œë™</label>
                        <select id="bestActivity" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                            <option value="wonjun-tour">ì›ì¤€ë‹˜ì˜ ë„ìŠ¨íŠ¸ íˆ¬ì–´</option>
                            <option value="accommodation">ìˆ™ì†Œ</option>
                            <option value="chungnam-tourpass">ì¶©ë‚¨íˆ¬ì–´íŒ¨ìŠ¤ ì²´í—˜</option>
                            <option value="food">ìŒì‹</option>
                            <option value="performance-sharing">ì„±ê³¼ê³µìœ  ë° ë¹„ì „ê³µìœ </option>
                        </select>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 500;">ê°œì„  ì˜ê²¬ ë° í”¼ë“œë°±</label>
                        <textarea id="feedback" placeholder="ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì‘ì„±í•´ì£¼ì„¸ìš”..." style="width: 100%; height: 80px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"></textarea>
                    </div>
                    
                    <button onclick="submitWorkshopSurvey()" style="width: 100%; background: #667eea; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">
                        ì„¤ë¬¸ì¡°ì‚¬ ì œì¶œ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- íˆ¬ì–´íŒ¨ìŠ¤ ë³´ê´€í•¨ ëª¨ë‹¬ -->
    <div class="modal" id="tourpassBoxModal">
        <div class="modal-content" style="max-width: 90%; max-height: 80%;">
            <button class="close-btn" onclick="closeModal('tourpassBoxModal')">&times;</button>
            <div class="modal-header">
                <h3>ğŸ“¦ íˆ¬ì–´íŒ¨ìŠ¤ ë³´ê´€í•¨</h3>
            </div>
            <div style="padding: 20px;">
                <div style="margin-bottom: 20px;">
                    <button onclick="showAddLinkForm()" style="background: #28a745; color: white; border: none; padding: 10px 15px; border-radius: 6px; cursor: pointer;">
                        â• ìƒˆ ë§í¬ ì¶”ê°€
                    </button>
                </div>
                
                <!-- ë§í¬ ì¶”ê°€ í¼ (ìˆ¨ê¹€ ìƒíƒœ) -->
                <div id="addLinkForm" style="display: none; background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="margin-bottom: 15px;">ğŸ”— ìƒˆ ë§í¬ ì¶”ê°€</h4>
                    <div style="margin-bottom: 10px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">ì œëª©:</label>
                        <input type="text" id="linkTitle" placeholder="ë§í¬ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">URL:</label>
                        <input type="url" id="linkUrl" placeholder="https://example.com" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">ë¹„ë°€ë²ˆí˜¸ (ì„ íƒì‚¬í•­):</label>
                        <input type="password" id="linkPassword" placeholder="ë§í¬ ë³´í˜¸ìš© ë¹„ë°€ë²ˆí˜¸" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button onclick="saveNewLink()" style="background: #667eea; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                            ğŸ’¾ ì €ì¥
                        </button>
                        <button onclick="cancelAddLink()" style="background: #6c757d; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                            âŒ ì·¨ì†Œ
                        </button>
                    </div>
                </div>
                
                <div id="linksList" style="max-height: 300px; overflow-y: auto;">
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentUser = null;
        let isOnline = false;
        let currentQuestion = 0;
        let mbtiAnswers = [];
        
        // Google Apps Script ì›¹ì•± URL - ì‹¤ì œ ë°°í¬ IDë¡œ ì—…ë°ì´íŠ¸
        const GAS_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbyQyuXtoF6LOh7Ag8w1N9yVbTV9MecJSg16UyP5VSb1kt2SDplndvsxX6OpDgGIXiv8/exec';
        
        // API í˜¸ì¶œ ê°œì„  í•¨ìˆ˜
async function callGoogleAppsScript(data, method = 'GET') {
  let url = GAS_WEB_APP_URL;
  const opts = { method };

  if (method === 'GET') {
    url += '?' + new URLSearchParams(data).toString();
  } else {
    // application/json ëŒ€ì‹  í¼ ì¸ì½”ë”© ì‚¬ìš© â†’ OPTIONS ì•ˆ ëœ¸
    opts.headers = { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' };
    opts.body = new URLSearchParams({ payload: JSON.stringify(data) }).toString();
  }

  const res = await fetch(url, opts);
  const text = await res.text();
  const result = JSON.parse(text);
  if (!result.success) throw new Error(result.data?.error || 'ì„œë²„ ì˜¤ë¥˜');
  return result.data;
}

        
        // MBTI ì§ˆë¬¸ ë°°ì—´ (ë¬¸ìì—´ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬)
        const mbtiQuestions = [
            {
                question: "ìƒˆë¡œìš´ ì‚¬ëŒì„ ë§Œë‚¬ì„ ë•Œ",
                answers: [
                    { text: "ë¨¼ì € ë‹¤ê°€ê°€ì„œ ì§ˆë¬¸ì„ ë˜ì§€ê³  ë¶„ìœ„ê¸°ë¥¼ ì£¼ë„í•œë‹¤", type: "E" },
                    { text: "ìƒëŒ€ê°€ ë¨¼ì € ë‹¤ê°€ì˜¤ê¸¸ ê¸°ë‹¤ë¦¬ë©° ê´€ì°°í•œë‹¤", type: "I" }
                ]
            },
            {
                question: "ì£¼ë§ ê³„íšì´ ê°‘ìê¸° ì·¨ì†Œë˜ì—ˆì„ ë•Œ",
                answers: [
                    { text: "ë‹¤ë¥¸ ì‚¬ëŒê³¼ ìƒˆ ì•½ì†ì„ ì¡ê±°ë‚˜ ë°–ì—ì„œ í™œë™í•œë‹¤", type: "E" },
                    { text: "í˜¼ìë§Œì˜ ì‹œê°„ì„ ì¦ê¸°ë©° ì±…ì´ë‚˜ ë„·í”Œë¦­ìŠ¤ ë“±ìœ¼ë¡œ ì‰°ë‹¤", type: "I" }
                ]
            },
            {
                question: "ì—¬í–‰ ì¤€ë¹„ ìŠ¤íƒ€ì¼",
                answers: [
                    { text: "ë‚ ì§œ, ìˆ™ì†Œ, ì¼ì •ì„ ì„¸ë¶€ì ìœ¼ë¡œ ê¸°ë¡í•´ì•¼ ì•ˆì‹¬ëœë‹¤", type: "J" },
                    { text: "ëª©ì ì§€ë§Œ ì •í•˜ê³  í˜„ì§€ì—ì„œ ìƒí™©ì— ë§ê²Œ ì›€ì§ì¸ë‹¤", type: "P" }
                ]
            },
            {
                question: "ë¬¸ì œ í•´ê²° ì ‘ê·¼ë²•",
                answers: [
                    { text: "ì‹¤ì œë¡œ ì¼ì–´ë‚œ ì‚¬ì‹¤ê³¼ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒê°í•œë‹¤", type: "S" },
                    { text: "ë§Œì•½ì— ë¼ëŠ” ê°€ì •ì„ ì„¸ìš°ê³  ê°€ëŠ¥ì„±ì„ íƒìƒ‰í•œë‹¤", type: "N" }
                ]
            },
            {
                question: "ì¹œêµ¬ê°€ í˜ë“  ì¼ì„ ê²ªì„ ë•Œ",
                answers: [
                    { text: "ê·¸ê±´ ì •ë§ ì†ìƒí–ˆê² ë‹¤ í•˜ê³  ê°ì •ì„ ë¨¼ì € ê³µê°í•œë‹¤", type: "F" },
                    { text: "ê·¸ëŸ¼ ì´ë ‡ê²Œ í•´ê²°í•´ë³´ëŠ” ê±´ ì–´ë•Œ í•˜ê³  ë°©ë²•ì„ ì œì‹œí•œë‹¤", type: "T" }
                ]
            },
            {
                question: "ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì— ì°¸ì—¬í•  ë•Œ",
                answers: [
                    { text: "ëª©í‘œ ë‹¬ì„±ê¹Œì§€ì˜ ë‹¨ê³„ë³„ ê³„íšì„ ë¨¼ì € ë§Œë“ ë‹¤", type: "J" },
                    { text: "ì „ì²´ ê·¸ë¦¼ê³¼ ë°©í–¥ì„±ë§Œ ì¡ê³  ì¦‰ì‹œ ì‹œì‘í•œë‹¤", type: "P" }
                ]
            },
            {
                question: "íšŒì˜ ì¤‘ ë‚´ ëª¨ìŠµ",
                answers: [
                    { text: "ë‹¤ë¥¸ ì‚¬ëŒì˜ ì˜ê²¬ì— ë…¼ë¦¬ì ìœ¼ë¡œ ë°˜ë°•í•˜ë©° í† ë¡ í•œë‹¤", type: "T" },
                    { text: "ë¶„ìœ„ê¸°ë¥¼ ë¶€ë“œëŸ½ê²Œ ë§Œë“¤ë©° ëª¨ë‘ê°€ ë™ì˜í•  ìˆ˜ ìˆê²Œ ë•ëŠ”ë‹¤", type: "F" }
                ]
            },
            {
                question: "ì •ë³´ ìŠµë“ ë°©ì‹",
                answers: [
                    { text: "ì§ì ‘ ê²½í—˜í•˜ê±°ë‚˜ êµ¬ì²´ì ì¸ ì‚¬ì‹¤ì„ ë´ì•¼ ë¯¿ëŠ”ë‹¤", type: "S" },
                    { text: "ì§ê´€ì ìœ¼ë¡œ ì´ê±´ ë  ê²ƒ ê°™ë‹¤ ë¼ëŠ” ëŠë‚Œì„ ë”°ë¥¸ë‹¤", type: "N" }
                ]
            },
            {
                question: "ì§ì¥ì—ì„œ ìƒˆë¡œìš´ ë™ë£Œê°€ ë“¤ì–´ì™”ì„ ë•Œ",
                answers: [
                    { text: "ë¨¼ì € ë§ì„ ê±¸ê³  ì¹œí•´ì§€ë©° íŒ€ ë¶„ìœ„ê¸°ë¥¼ ì´ëˆë‹¤", type: "E" },
                    { text: "ì¡°ìš©íˆ ì§€ì¼œë³´ë‹¤ê°€ í•„ìš”í•  ë•Œ ë„ì›€ì„ ì¤€ë‹¤", type: "I" }
                ]
            },
            {
                question: "ì¤‘ìš”í•œ ì„ íƒì„ í•  ë•Œ",
                answers: [
                    { text: "ê°ê´€ì  ê¸°ì¤€ê³¼ ê²°ê³¼ì˜ íš¨ìœ¨ì„±ì„ ë”°ì§„ë‹¤", type: "T" },
                    { text: "ë‚˜ì™€ ì£¼ë³€ ì‚¬ëŒì˜ ë§ˆìŒì´ í¸í•œì§€ë¥¼ ë¨¼ì € ê³ ë ¤í•œë‹¤", type: "F" }
                ]
            }
        ];

// êµ¬ê¸€ ë¡œê·¸ì¸(ë°ëª¨ìš©) - ê¸°ì¡´ ì‚¬ìš©ì ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ê¸°ëŠ¥ ì¶”ê°€
async function googleLogin() {
  const btn = document.getElementById('googleLoginBtn');
  try {
    btn.innerHTML = 'â³ ë¡œê·¸ì¸ ì¤‘...';

    const name = prompt('ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:');
    if (!name) { btn.innerHTML = 'ì´ë¦„ìœ¼ë¡œ ë¡œê·¸ì¸'; return; }

    const email = prompt('ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”:');
    if (!email) { btn.innerHTML = 'ì´ë¦„ìœ¼ë¡œ ë¡œê·¸ì¸'; return; }

    // 1) ë¨¼ì € ê¸°ì¡´ ì°¸ê°€ì ëª©ë¡ ì¡°íšŒ
    let existingUser = null;
    try {
      const check = await callGoogleAppsScript({ action: 'getParticipants' });
      if (check.participants) {
        existingUser = check.participants.find(p =>
          p.name === name && p.email === email
        );
      }
    } catch (e) {
      console.warn('ì°¸ê°€ì ì¡°íšŒ ì‹¤íŒ¨:', e.message);
    }

    if (existingUser) {
      // 2) ê¸°ì¡´ ì‚¬ìš©ìë©´ ê·¸ëŒ€ë¡œ ë¡œê·¸ì¸
      currentUser = {
        name: existingUser.name,
        email: existingUser.email,
        team: existingUser.team,
        position: existingUser.position,
        avatar: existingUser.name.substring(0, 1)
      };
      alert(`${name}ë‹˜, ê¸°ì¡´ ê¸°ë¡ìœ¼ë¡œ ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.`);
      showMainApp();
      return;
    }

    // 3) ì‹ ê·œ ì‚¬ìš©ì ë“±ë¡
    const userData = {
      action: 'registerUser',
      name: name,
      email: email,
      team: 'íˆ¬ì–´íŒ¨ìŠ¤ì‚¬ì—…ë¶€',
      position: 'ì§ì›'
    };

    const response = await callGoogleAppsScript(userData, 'POST');
    currentUser = {
      name: response.user.name,
      email: response.user.email,
      team: response.user.team,
      position: response.user.position,
      avatar: response.user.name.substring(0, 1)
    };

    showMainApp();

  } catch (error) {
    alert('ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + error.message);
  } finally {
    btn.innerHTML = 'ì´ë¦„ìœ¼ë¡œ ë¡œê·¸ì¸';
  }
}

        // ì‹¤ì œ ë°±ì—”ë“œì™€ ì—°ë™í•œ ë°ì´í„° ë™ê¸°í™”
        async function syncData() {
            const syncBtn = document.querySelector('button[onclick="syncData()"]');
            if (syncBtn) {
                syncBtn.innerHTML = 'â³';
                syncBtn.style.animation = 'spin 2s linear infinite';
            }
            
            try {
                // ì°¸ê°€ì ëª©ë¡ ë™ê¸°í™”
                const participantsData = await callGoogleAppsScript({action: 'getParticipants'});
                if (participantsData.participants) {
                    updateParticipantsList(participantsData.participants);
                }
                
                // MBTI ê²°ê³¼ ë™ê¸°í™”  
                const mbtiData = await callGoogleAppsScript({action: 'getMBTIResults'});
                if (mbtiData.results) {
                    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì—…ë°ì´íŠ¸
                    localStorage.setItem('mbtiResults', JSON.stringify(mbtiData.results));
                }
                
                const now = new Date().toLocaleTimeString('ko-KR');
                document.getElementById('lastSync').textContent = 'ë™ê¸°í™”: ' + now;
                
            } catch (error) {
                console.error('ë™ê¸°í™” ì‹¤íŒ¨:', error);
                alert('ë°ì´í„° ë™ê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë°±ì—”ë“œ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
            } finally {
                if (syncBtn) {
                    syncBtn.innerHTML = 'ğŸ”„';
                    syncBtn.style.animation = 'none';
                }
            }
        }

        // MBTI ê²°ê³¼ ì‹¤ì œ ì €ì¥
        async function showMBTIResult() {
            const counts = {E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0};
            
            mbtiAnswers.forEach(function(answer) {
                counts[answer.type]++;
            });
            
            const E_I = counts.E > counts.I ? 'E' : 'I';
            const S_N = counts.S > counts.N ? 'S' : 'N';
            const T_F = counts.T > counts.F ? 'T' : 'F';
            const J_P = counts.J > counts.P ? 'J' : 'P';
            
            const mbtiType = E_I + S_N + T_F + J_P;
            const testDuration = Math.floor((Date.now() - window.mbtiStartTime) / 1000);
            
            try {
                // ë°±ì—”ë“œì— MBTI ê²°ê³¼ ì €ì¥
                const resultData = {
                    action: 'saveMBTIResult',
                    name: currentUser.name,
                    email: currentUser.email,
                    mbtiType: mbtiType,
                    answers: mbtiAnswers,
                    testDuration: testDuration
                };
                
                await callGoogleAppsScript(resultData, 'POST');
                
                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ë„ ì €ì¥
                const mbtiResults = JSON.parse(localStorage.getItem('mbtiResults') || '[]');
                const userResult = {
                    name: currentUser.name,
                    email: currentUser.email,
                    mbtiType: mbtiType,
                    timestamp: new Date().toISOString(),
                    team: currentUser.team,
                    position: currentUser.position
                };
                
                // ì¤‘ë³µ ì œê±° í›„ ì¶”ê°€
                const filteredResults = mbtiResults.filter(r => r.email !== currentUser.email);
                filteredResults.push(userResult);
                localStorage.setItem('mbtiResults', JSON.stringify(filteredResults));
                
                // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                updateMBTIButtonState();
                
                const descriptions = {
                    'INTJ': 'ê±´ì¶•ê°€ - ìƒìƒë ¥ì´ í’ë¶€í•˜ê³  ì „ëµì ì¸ ì‚¬ê³ ë¥¼ í•˜ëŠ” ì„±ê²©',
                    'INTP': 'ë…¼ë¦¬ìˆ ì‚¬ - ì§€ì‹ì„ ê°ˆë§í•˜ëŠ” í˜ì‹ ì ì¸ ë°œëª…ê°€',
                    'ENTJ': 'í†µì†”ì - ëŒ€ë‹´í•˜ê³  ìƒìƒë ¥ì´ í’ë¶€í•œ ê°•ë ¥í•œ ì˜ì§€ì˜ ì§€ë„ì',
                    'ENTP': 'ë³€ë¡ ê°€ - ë˜‘ë˜‘í•˜ê³  í˜¸ê¸°ì‹¬ì´ ë§ì€ ì‚¬ìƒ‰ê°€',
                    'INFJ': 'ì˜¹í˜¸ì - ì„ ì˜ì˜ ëª©ì ê³¼ ì˜ë¯¸ë¥¼ ì¶”êµ¬í•˜ëŠ” ì´ìƒì£¼ì˜ì',
                    'INFP': 'ì¤‘ì¬ì - í•­ìƒ ì„ ì„ í–‰í•  ì¤€ë¹„ê°€ ë˜ì–´ ìˆëŠ” ì‹œì ì´ê³  ì¹œì ˆí•œ ì´íƒ€ì£¼ì˜ì',
                    'ENFJ': 'ì„ ë„ì - ì¹´ë¦¬ìŠ¤ë§ˆ ë„˜ì¹˜ê³  ì˜ê°ì„ ì£¼ëŠ” ì§€ë„ì',
                    'ENFP': 'í™œë™ê°€ - ì—´ì •ì ì´ê³  ì°½ì˜ì ì¸ ì‚¬íšŒì',
                    'ISTJ': 'ë…¼ë¦¬ì£¼ì˜ì - ì‹¤ìš©ì ì´ê³  ì‚¬ì‹¤ì— ê¸°ë°˜í•œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì„±ê²©',
                    'ISFJ': 'ìˆ˜í˜¸ì - ë”°ëœ»í•œ ë§ˆìŒê³¼ í—Œì‹ ì ì¸ ì„±ê²©',
                    'ESTJ': 'ê²½ì˜ì - í›Œë¥­í•œ ê´€ë¦¬ìì´ë©° ê·œì¹™ì´ë‚˜ ì „í†µì„ ì¤‘ì‹œí•˜ëŠ” ì„±ê²©',
                    'ESFJ': 'ì§‘ì •ê´€ - ë°°ë ¤ì‹¬ì´ ë§ê³  ì‚¬êµì ì´ë©° ì¸ê¸°ê°€ ë†’ì€ ì„±ê²©',
                    'ISTP': 'ë§ŒëŠ¥ì¬ì£¼ê¾¼ - ëŒ€ë‹´í•˜ë©´ì„œë„ í˜„ì‹¤ì ì¸ ì‚¬ê³ ë¥¼ í•˜ëŠ” ì‹¤í—˜ì •ì‹ ì´ ê°•í•œ ì„±ê²©',
                    'ISFP': 'ëª¨í—˜ê°€ - ìœ ì—°í•˜ê³  ë§¤ë ¥ì ì¸ ì˜ˆìˆ ê°€ ê¸°ì§ˆì˜ ì„±ê²©',
                    'ESTP': 'ì‚¬ì—…ê°€ - ì˜ë¦¬í•˜ê³  ì—ë„ˆì§€ ë„˜ì¹˜ë©° í˜„ì‹¤ ê°ê°ì´ ë›°ì–´ë‚œ ì„±ê²©',
                    'ESFP': 'ì—°ì˜ˆì¸ - ì¦‰í¥ì ì´ê³  ì—´ì •ì ì´ë©° ì‚¬ëŒê³¼ ì–´ìš¸ë¦¬ê¸° ì¢‹ì•„í•˜ëŠ” ì„±ê²©'
                };
                
                alert('MBTI ê²€ì‚¬ ì™„ë£Œ!\n\në‹¹ì‹ ì˜ ì„±ê²© ìœ í˜•: ' + mbtiType + '\n' + (descriptions[mbtiType] || '') + '\n\nê²°ê³¼ê°€ ì„œë²„ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                
                // ê´€ê³„ë„ ë³´ê¸° ì—¬ë¶€ í™•ì¸
                if (filteredResults.length > 1 && confirm('ë‹¤ë¥¸ ì°¸ê°€ìë“¤ê³¼ì˜ MBTI ê´€ê³„ë„ë¥¼ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    setTimeout(() => showMBTIRelationship(), 500);
                }
                
            } catch (error) {
                console.error('MBTI ê²°ê³¼ ì €ì¥ ì‹¤íŒ¨:', error);
                
                // ë°±ì—”ë“œ ì €ì¥ ì‹¤íŒ¨ ì‹œ ë¡œì»¬ì—ë§Œ ì €ì¥
                const mbtiResults = JSON.parse(localStorage.getItem('mbtiResults') || '[]');
                const userResult = {
                    name: currentUser.name,
                    email: currentUser.email,
                    mbtiType: mbtiType,
                    timestamp: new Date().toISOString(),
                    team: currentUser.team,
                    position: currentUser.position
                };
                
                const filteredResults = mbtiResults.filter(r => r.email !== currentUser.email);
                filteredResults.push(userResult);
                localStorage.setItem('mbtiResults', JSON.stringify(filteredResults));
                
                updateMBTIButtonState();
                
                alert('MBTI ê²€ì‚¬ ì™„ë£Œ!\në‹¹ì‹ ì˜ ìœ í˜•: ' + mbtiType + '\n\në°±ì—”ë“œ ì €ì¥ì— ì‹¤íŒ¨í–ˆì§€ë§Œ ë¡œì»¬ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
            
            closeMBTITest();
        }

        // ì„¤ë¬¸ì¡°ì‚¬ ì‹¤ì œ ì €ì¥
        async function submitWorkshopSurvey() {
            const satisfaction = document.getElementById('satisfaction').value;
            const bestActivity = document.getElementById('bestActivity').value;
            const feedback = document.getElementById('feedback').value;
            
            if (!bestActivity) {
                alert('ê°€ì¥ ë§Œì¡±í–ˆë˜ í™œë™ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            try {
                const surveyData = {
                    action: 'saveSurvey',
                    name: currentUser.name,
                    email: currentUser.email,
                    satisfaction: parseInt(satisfaction),
                    feedback: feedback,
                    answers: {
                        bestActivity: bestActivity,
                        satisfactionLevel: satisfaction
                    }
                };
                
                await callGoogleAppsScript(surveyData, 'POST');
                alert('ì„¤ë¬¸ì¡°ì‚¬ê°€ ì„œë²„ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!');
                
            } catch (error) {
                console.error('ì„¤ë¬¸ ì €ì¥ ì‹¤íŒ¨:', error);
                alert('ì„¤ë¬¸ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
            
            closeModal('surveyModal');
        }

        // ë°±ì—”ë“œ ì—°ê²° ìƒíƒœ í™•ì¸
        async function checkBackendConnection() {
            try {
                await callGoogleAppsScript({action: 'healthCheck'});
                console.log('ë°±ì—”ë“œ ì—°ê²° ì„±ê³µ');
                return true;
            } catch (error) {
                console.warn('ë°±ì—”ë“œ ì—°ê²° ì‹¤íŒ¨ - ì˜¤í”„ë¼ì¸ ëª¨ë“œë¡œ ì‘ë™:', error.message);
                return false;
            }
        }

        // ì•± ì´ˆê¸°í™” ê°œì„ 
        async function initializeApp() {
            checkConnection();
            
            // ë°±ì—”ë“œ ì—°ê²° í™•ì¸
            const backendConnected = await checkBackendConnection();
            
            if (!backendConnected) {
                // ë°±ì—”ë“œ ë¯¸ì—°ê²° ì‹œ ì•Œë¦¼
                const statusElement = document.getElementById('connectionText');
                if (statusElement) {
                    statusElement.textContent = 'ì˜¤í”„ë¼ì¸ ëª¨ë“œ';
                    document.getElementById('connectionDot').className = 'status-dot status-offline';
                }
            }
            
            checkLoginStatus();
        }

        // ì—°ê²° ìƒíƒœ í™•ì¸
        function checkConnection() {
            isOnline = navigator.onLine;
            updateConnectionStatus();
            
            window.addEventListener('online', function() {
                isOnline = true;
                updateConnectionStatus();
                syncData();
            });
            
            window.addEventListener('offline', function() {
                isOnline = false;
                updateConnectionStatus();
            });
        }

        function updateConnectionStatus() {
            const dot = document.getElementById('connectionDot');
            const text = document.getElementById('connectionText');
            
            if (isOnline) {
                dot.className = 'status-dot status-online';
                text.textContent = 'ì˜¨ë¼ì¸';
            } else {
                dot.className = 'status-dot status-offline';
                text.textContent = 'ì˜¤í”„ë¼ì¸';
            }
        }

        function checkLoginStatus() {
            const savedUser = localStorage.getItem('tourpassUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainApp();
            }
        }

        function showMainApp() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('userInfo').style.display = 'block';
            document.getElementById('mainMenu').style.display = 'grid';
            
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userEmail').textContent = currentUser.email;
            document.getElementById('userAvatar').textContent = currentUser.avatar;
            
            localStorage.setItem('tourpassUser', JSON.stringify(currentUser));
            
            // MBTI ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            setTimeout(updateMBTIButtonState, 100);
            
            syncData();
        }

        // ëª¨ë‹¬ ê´€ë¦¬
        function activateMenuButton(action) {
            document.querySelectorAll('.menu-item').forEach(function(item) {
                item.classList.remove('active');
            });
            
            const targetButton = document.querySelector('[data-action="' + action + '"]');
            if (targetButton) {
                targetButton.classList.add('active');
            }
        }

        function deactivateMenuButton(action) {
            const targetButton = document.querySelector('[data-action="' + action + '"]');
            if (targetButton) {
                targetButton.classList.remove('active');
            }
        }

        function openModal(modalId) {
            const action = modalId.replace('Modal', '');
            activateMenuButton(action);
            document.getElementById(modalId).style.display = 'block';
            
            if (modalId === 'tourpassBoxModal') {
                updateLinksList();
            }
        }

        function closeModal(modalId) {
            const action = modalId.replace('Modal', '');
            deactivateMenuButton(action);
            document.getElementById(modalId).style.display = 'none';
        }

        // MBTI ê²€ì‚¬ ì‹œì‘ ì „ ì™„ë£Œ ì—¬ë¶€ í™•ì¸
        function startMBTITest() {
            // ì´ë¯¸ ì™„ë£Œí–ˆëŠ”ì§€ í™•ì¸
            const mbtiResults = JSON.parse(localStorage.getItem('mbtiResults') || '[]');
            const userResult = mbtiResults.find(r => r.email === currentUser.email);
            
            if (userResult) {
                if (confirm(`ì´ë¯¸ MBTI ê²€ì‚¬ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.\nê²°ê³¼: ${userResult.mbtiType}\n\nê´€ê³„ë„ë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    showMBTIRelationship();
                }
                return;
            }
            
            // ìƒˆë¡œìš´ ê²€ì‚¬ ì‹œì‘
            window.mbtiStartTime = Date.now();
            currentQuestion = 0;
            mbtiAnswers = [];
            updateMBTIQuestion();
            openModal('mbtiModal');
        }

        // ë©”ë‰´ì—ì„œ MBTI ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateMBTIButtonState() {
            const mbtiResults = JSON.parse(localStorage.getItem('mbtiResults') || '[]');
            const userResult = mbtiResults.find(r => r.email === currentUser.email);
            const mbtiButton = document.querySelector('[data-action="mbti"]');
            
            if (mbtiButton && userResult) {
                const titleElement = mbtiButton.querySelector('.menu-title');
                const descElement = mbtiButton.querySelector('.menu-desc');
                
                titleElement.textContent = 'MBTI ê²°ê³¼';
                descElement.textContent = `ì™„ë£Œë¨: ${userResult.mbtiType}`;
                
                // ì™„ë£Œ í‘œì‹œ ì•„ì´ì½˜ ì¶”ê°€
                mbtiButton.style.position = 'relative';
                if (!mbtiButton.querySelector('.completed-badge')) {
                    const badge = document.createElement('div');
                    badge.className = 'completed-badge';
                    badge.innerHTML = 'âœ“';
                    badge.style.cssText = `
                        position: absolute;
                        top: 5px;
                        right: 5px;
                        background: #28a745;
                        color: white;
                        border-radius: 50%;
                        width: 20px;
                        height: 20px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 0.7em;
                        font-weight: bold;
                        z-index: 2;
                    `;
                    mbtiButton.appendChild(badge);
                }
            }
        }

        function updateMBTIQuestion() {
            if (currentQuestion >= mbtiQuestions.length) {
                showMBTIResult();
                return;
            }

            const question = mbtiQuestions[currentQuestion];
            document.getElementById('questionNumber').textContent = 'ì§ˆë¬¸ ' + (currentQuestion + 1) + '/' + mbtiQuestions.length;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            
            question.answers.forEach(function(answer, index) {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = answer.text;
                button.onclick = function() { selectAnswer(index); };
                optionsContainer.appendChild(button);
            });

            const progress = (currentQuestion / mbtiQuestions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('nextBtn').style.display = 'none';
        }

        function selectAnswer(answerIndex) {
            document.querySelectorAll('.answer-btn').forEach(function(btn) {
                btn.classList.remove('selected');
            });
            
            document.querySelectorAll('.answer-btn')[answerIndex].classList.add('selected');
            
            const question = mbtiQuestions[currentQuestion];
            mbtiAnswers[currentQuestion] = question.answers[answerIndex];
            
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            currentQuestion++;
            updateMBTIQuestion();
        }

        // MBTI ê´€ê³„ë„ í‘œì‹œ
        function showMBTIRelationship() {
            const mbtiResults = JSON.parse(localStorage.getItem('mbtiResults') || '[]');
            const currentUserMBTI = mbtiResults.find(r => r.email === currentUser.email);
            
            if (!currentUserMBTI || mbtiResults.length < 2) {
                alert('ê´€ê³„ë„ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•´ì„œëŠ” ë” ë§ì€ ì°¸ê°€ìì˜ MBTI ê²€ì‚¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }
            
            const relationshipHTML = createMBTIRelationshipHTML(currentUserMBTI, mbtiResults);
            document.body.insertAdjacentHTML('beforeend', relationshipHTML);
        }

        function createMBTIRelationshipHTML(currentUser, allResults) {
            const relationships = calculateMBTIRelationships(currentUser, allResults);
            
            return `
                <div class="modal" id="mbtiRelationshipModal" style="display: block;">
                    <div class="modal-content" style="max-width: 95%; max-height: 90%; overflow-y: auto;">
                        <button class="close-btn" onclick="closeMBTIRelationship()">&times;</button>
                        <div class="modal-header">
                            <h3>${currentUser.name}ë‹˜ì˜ MBTI ê´€ê³„ë„</h3>
                            <p style="color: #667eea; font-weight: 500;">ë‹¹ì‹ ì˜ ìœ í˜•: ${currentUser.mbtiType}</p>
                        </div>
                        <div style="padding: 20px;">
                            ${relationships.map(category => `
                                <div class="relationship-category" style="margin-bottom: 25px;">
                                    <h4 style="background: ${category.color}; color: white; padding: 10px; border-radius: 8px; margin-bottom: 15px; display: flex; align-items: center;">
                                        <span style="font-size: 1.2em; margin-right: 8px;">${category.emoji}</span>
                                        ${category.title} (${category.members.length}ëª…)
                                    </h4>
                                    <div style="background: ${category.bgColor}; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                                        <p style="font-size: 0.9em; color: #555; margin-bottom: 15px;">${category.description}</p>
                                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 10px;">
                                            ${category.members.map(member => `
                                                <div class="member-card" style="background: white; padding: 12px; border-radius: 6px; border-left: 4px solid ${category.color};">
                                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                                        <div>
                                                            <strong>${member.name}</strong>
                                                            <div style="font-size: 0.8em; color: #666;">${member.team || ''} ${member.position || ''}</div>
                                                        </div>
                                                        <div style="background: ${category.color}; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold;">
                                                            ${member.mbtiType}
                                                        </div>
                                                    </div>
                                                    <div style="margin-top: 8px; font-size: 0.8em; color: #666;">
                                                        ê¶í•©ë„: ${member.compatibilityScore}%
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                            
                            <div class="mbti-statistics" style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin-top: 20px;">
                                <h4 style="margin-bottom: 15px; color: #333;">íŒ€ MBTI í†µê³„</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                    ${generateMBTIStatistics(allResults)}
                                </div>
                            </div>
                            
                            <div class="team-building-tips" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; margin-top: 20px;">
                                <h4 style="margin-bottom: 15px;">íŒ€ì›Œí¬ í–¥ìƒ íŒ</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                    ${generateTeamBuildingTips(currentUser.mbtiType)}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <style>
                .relationship-category {
                    animation: fadeInUp 0.5s ease-out;
                }
                
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                .member-card {
                    transition: transform 0.2s ease;
                }
                
                .member-card:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                }
                </style>
            `;
        }

        function calculateMBTIRelationships(currentUser, allResults) {
            const others = allResults.filter(r => r.email !== currentUser.email);
            
            const relationships = {
                perfect: [],
                great: [],
                good: [],
                okay: [],
                challenging: []
            };
            
            others.forEach(other => {
                const compatibility = getMBTICompatibility(currentUser.mbtiType, other.mbtiType);
                const member = {
                    ...other,
                    compatibilityScore: compatibility.score
                };
                
                if (compatibility.score >= 95) {
                    relationships.perfect.push(member);
                } else if (compatibility.score >= 85) {
                    relationships.great.push(member);
                } else if (compatibility.score >= 70) {
                    relationships.good.push(member);
                } else if (compatibility.score >= 60) {
                    relationships.okay.push(member);
                } else {
                    relationships.challenging.push(member);
                }
            });
            
            return [
                {
                    title: 'í™˜ìƒì˜ ê¶í•©',
                    emoji: 'ğŸ’–',
                    color: '#e91e63',
                    bgColor: '#fce4ec',
                    members: relationships.perfect,
                    description: 'ê°€ì¥ ì´ìƒì ì¸ ê´€ê³„ì…ë‹ˆë‹¤. ì„œë¡œë¥¼ ì™„ë²½í•˜ê²Œ ë³´ì™„í•˜ë©° ìì—°ìŠ¤ëŸ½ê²Œ ì¡°í™”ë¥¼ ì´ë£¹ë‹ˆë‹¤.'
                },
                {
                    title: 'ìµœê³ ì˜ íŒŒíŠ¸ë„ˆ',
                    emoji: 'ğŸŒŸ',
                    color: '#ff9800',
                    bgColor: '#fff3e0',
                    members: relationships.great,
                    description: 'ë§¤ìš° ì¢‹ì€ ê´€ê³„ì…ë‹ˆë‹¤. ì„œë¡œì—ê²Œ ê¸ì •ì ì¸ ì˜í–¥ì„ ì£¼ë©° í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
                },
                {
                    title: 'ì¢‹ì€ í˜‘ë ¥ì',
                    emoji: 'ğŸ¤',
                    color: '#4caf50',
                    bgColor: '#e8f5e8',
                    members: relationships.good,
                    description: 'ì›í™œí•œ í˜‘ë ¥ì´ ê°€ëŠ¥í•œ ê´€ê³„ì…ë‹ˆë‹¤. ì„œë¡œì˜ ì°¨ì´ì ì„ ì¸ì •í•˜ë©° ì˜ ì–´ìš¸ë¦½ë‹ˆë‹¤.'
                },
                {
                    title: 'í‰ë²”í•œ ê´€ê³„',
                    emoji: 'ğŸ˜Š',
                    color: '#2196f3',
                    bgColor: '#e3f2fd',
                    members: relationships.okay,
                    description: 'ë¬´ë‚œí•œ ê´€ê³„ì…ë‹ˆë‹¤. ì„œë¡œë¥¼ ì´í•´í•˜ë ¤ëŠ” ë…¸ë ¥ì´ í•„ìš”í•˜ì§€ë§Œ ì¢‹ì€ ê´€ê³„ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
                },
                {
                    title: 'ì„±ì¥ì˜ ê¸°íšŒ',
                    emoji: 'ğŸ’ª',
                    color: '#9c27b0',
                    bgColor: '#f3e5f5',
                    members: relationships.challenging,
                    description: 'ì„œë¡œ ë‹¤ë¥¸ ë©´ì´ ë§ì•„ ë„ì „ì ì´ì§€ë§Œ, ì´ë¥¼ í†µí•´ ë”ìš± ì„±ì¥í•  ìˆ˜ ìˆëŠ” ê´€ê³„ì…ë‹ˆë‹¤.'
                }
            ].filter(category => category.members.length > 0);
        }

        function getMBTICompatibility(type1, type2) {
            const compatibilityMatrix = {
                // í™˜ìƒì˜ ê¶í•© (95-100ì )
                'ENFP': ['INTJ', 'INFJ'], 'ENTP': ['INTJ', 'INFJ'],
                'INFP': ['ENTJ', 'ENFJ'], 'INTP': ['ENTJ', 'ENFJ'],
                'ENFJ': ['INFP', 'INTP'], 'ENTJ': ['INFP', 'INTP'],
                'INFJ': ['ENFP', 'ENTP'], 'INTJ': ['ENFP', 'ENTP'],
                'ESFP': ['ISTJ', 'ISFJ'], 'ESTP': ['ISTJ', 'ISFJ'],
                'ISFP': ['ESTJ', 'ESFJ'], 'ISTP': ['ESTJ', 'ESFJ'],
                'ESFJ': ['ISFP', 'ISTP'], 'ESTJ': ['ISFP', 'ISTP'],
                'ISFJ': ['ESFP', 'ESTP'], 'ISTJ': ['ESFP', 'ESTP']
            };
            
            // í™˜ìƒì˜ ê¶í•© ì²´í¬
            if (compatibilityMatrix[type1] && compatibilityMatrix[type1].includes(type2)) {
                return { score: 96, level: 'perfect' };
            }
            
            // ê¸°ë³¸ í˜¸í™˜ì„± ê³„ì‚°
            let score = 70; // ê¸°ë³¸ ì ìˆ˜
            
            // E/I í˜¸í™˜ì„±
            if (type1[0] !== type2[0]) score += 8; // ë°˜ëŒ€ ì„±í–¥ì€ ë³´ì™„ì 
            else score += 3; // ê°™ì€ ì„±í–¥ì€ ì´í•´ ê°€ëŠ¥
            
            // S/N í˜¸í™˜ì„±
            if (type1[1] === type2[1]) score += 10; // ê°™ì€ ì¸ì‹ ê¸°ëŠ¥
            else score -= 5;
            
            // T/F í˜¸í™˜ì„±
            if (type1[2] !== type2[2]) score += 7; // ë‹¤ë¥¸ íŒë‹¨ ê¸°ëŠ¥ì€ ê· í˜•
            else score += 4;
            
            // J/P í˜¸í™˜ì„±
            if (type1[3] !== type2[3]) score += 6; // ë‹¤ë¥¸ ìƒí™œ ì–‘ì‹ì€ ë³´ì™„ì 
            else score += 2;
            
            return { 
                score: Math.min(95, Math.max(55, score)), 
                level: score >= 85 ? 'great' : score >= 70 ? 'good' : score >= 60 ? 'okay' : 'challenging'
            };
        }

        function generateMBTIStatistics(results) {
            const typeCounts = {};
            const dimensionCounts = {E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0};
            
            results.forEach(result => {
                const type = result.mbtiType;
                typeCounts[type] = (typeCounts[type] || 0) + 1;
                
                if (type) {
                    dimensionCounts[type[0]]++;
                    dimensionCounts[type[1]]++;
                    dimensionCounts[type[2]]++;
                    dimensionCounts[type[3]]++;
                }
            });
            
            const mostCommon = Object.keys(typeCounts).reduce((a, b) => 
                typeCounts[a] > typeCounts[b] ? a : b, '');
            
            return `
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <strong>ê°€ì¥ ë§ì€ ìœ í˜•</strong><br>
                    <span style="color: #667eea; font-size: 1.1em;">${mostCommon} (${typeCounts[mostCommon] || 0}ëª…)</span>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <strong>ì™¸í–¥ vs ë‚´í–¥</strong><br>
                    E: ${dimensionCounts.E}ëª… | I: ${dimensionCounts.I}ëª…
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <strong>ê°ê° vs ì§ê´€</strong><br>
                    S: ${dimensionCounts.S}ëª… | N: ${dimensionCounts.N}ëª…
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <strong>ì‚¬ê³  vs ê°ì •</strong><br>
                    T: ${dimensionCounts.T}ëª… | F: ${dimensionCounts.F}ëª…
                </div>
            `;
        }

        function generateTeamBuildingTips(mbtiType) {
            const tips = {
                'ENFP': ['ì°½ì˜ì  ì•„ì´ë””ì–´ íšŒì˜ ì£¼ë„', 'íŒ€ ë¶„ìœ„ê¸° ë©”ì´ì»¤ ì—­í• ', 'ìƒˆë¡œìš´ ê´€ì  ì œì‹œ'],
                'INTJ': ['ì „ëµì  ê³„íš ìˆ˜ë¦½', 'ì¥ê¸°ì  ë¹„ì „ ì œì‹œ', 'íš¨ìœ¨ì  ì‹œìŠ¤í…œ êµ¬ì¶•'],
                'ESFJ': ['íŒ€ì› ê°„ í™”í•© ë„ëª¨', 'ì¼ì • ê´€ë¦¬ ë° ì¡°ìœ¨', 'ì„¸ì‹¬í•œ ë°°ë ¤ì™€ ì§€ì›'],
                'ISTP': ['ì‹¤ë¬´ì  ë¬¸ì œ í•´ê²°', 'ê¸°ìˆ ì  ì§€ì› ì œê³µ', 'ì¹¨ì°©í•œ ìœ„ê¸° ëŒ€ì‘']
            };
            
            const userTips = tips[mbtiType] || ['íŒ€ì›Œí¬ ê¸°ì—¬', 'í˜‘ë ¥ì  ì†Œí†µ', 'ìƒí˜¸ ì¡´ì¤‘'];
            
            return userTips.map(tip => `
                <div style="background: rgba(255,255,255,0.2); padding: 12px; border-radius: 6px;">
                    <i class="fas fa-lightbulb" style="margin-right: 8px;"></i>${tip}
                </div>
            `).join('');
        }

        function closeMBTIRelationship() {
            const modal = document.getElementById('mbtiRelationshipModal');
            if (modal) {
                modal.remove();
            }
        }

        // ì°¸ê°€ì í˜„í™©ì—ì„œë„ MBTI ê´€ê³„ë„ ë³´ê¸° ì¶”ê°€
        function updateParticipantsList(participants) {
            const participantsList = document.getElementById('participantsList');
            participantsList.innerHTML = '';
            
            participants.forEach(participant => {
                const participantItem = document.createElement('div');
                participantItem.className = 'participant-item';
                participantItem.innerHTML = `
                    <div class="participant-avatar">${participant.name.substring(0, 1)}</div>
                    <div>
                        <div><strong>${participant.name}</strong> 
                            ${participant.mbtiType ? `<span style="color: #667eea;">[${participant.mbtiType}]</span>` : ''}
                        </div>
                        <div style="font-size: 0.8em; color: #666;">${participant.team} ${participant.position}</div>
                    </div>
                `;
                participantsList.appendChild(participantItem);
            });
            
            // MBTI ê´€ê³„ë„ ë³´ê¸° ë²„íŠ¼ ì¶”ê°€
            const mbtiButton = document.createElement('button');
            mbtiButton.innerHTML = '<i class="fas fa-sitemap"></i> MBTI ê´€ê³„ë„ ë³´ê¸°';
            mbtiButton.className = 'sync-btn';
            mbtiButton.style.width = '100%';
            mbtiButton.style.marginTop = '15px';
            mbtiButton.onclick = function() {
                if (currentUser && currentUser.name) {
                    showMBTIRelationship();
                } else {
                    alert('MBTI ê²€ì‚¬ë¥¼ ë¨¼ì € ì™„ë£Œí•´ì£¼ì„¸ìš”.');
                }
            };
            participantsList.appendChild(mbtiButton);
        }

        function closeMBTITest() {
            closeModal('mbtiModal');
        }

        // ì›Œí¬ìƒµ ì¼ì • ì˜µì…˜
        function openScheduleOptions() {
            activateMenuButton('schedule');
            const modalHTML = '<div class="modal" id="scheduleOptionsModal" style="display: block;">' +
                '<div class="modal-content">' +
                '<button class="close-btn" onclick="closeScheduleOptions()">&times;</button>' +
                '<div class="modal-header"><h3>ì›Œí¬ìƒµ ì¼ì • ì„ íƒ</h3></div>' +
                '<div style="padding: 20px;">' +
                '<div onclick="openScheduleLink(\'phase1\')" style="display: flex; align-items: center; padding: 15px; margin-bottom: 15px; border: 1px solid #eee; border-radius: 8px; cursor: pointer;">' +
                '<i class="fas fa-graduation-cap" style="color: #28a745; font-size: 1.5em; margin-right: 15px;"></i>' +
                '<div><div style="font-weight: 600;">1ì°¨ ì—­ëŸ‰ê°•í™” ì›Œí¬ìƒµ ì¼ì •</div></div></div>' +
                '<div onclick="openScheduleLink(\'phase2\')" style="display: flex; align-items: center; padding: 15px; margin-bottom: 15px; border: 1px solid #eee; border-radius: 8px; cursor: pointer;">' +
                '<i class="fas fa-users" style="color: #667eea; font-size: 1.5em; margin-right: 15px;"></i>' +
                '<div><div style="font-weight: 600;">2ì°¨ ì†Œí†µê°•í™” ì›Œí¬ìƒµ ì„¸ë¶€ì¼ì •</div></div></div>' +
                '<div onclick="openScheduleLink(\'phase3\')" style="display: flex; align-items: center; padding: 15px; border: 1px solid #eee; border-radius: 8px; cursor: pointer;">' +
                '<i class="fas fa-rocket" style="color: #fd7e14; font-size: 1.5em; margin-right: 15px;"></i>' +
                '<div><div style="font-weight: 600;">3ì°¨ 2025ì„œë°‹ì„œìš¸ì•¤ì—‘ìŠ¤í¬2025 ì„¸ë¯¸ë‚˜</div></div></div>' +
                '</div></div></div>';
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        function closeScheduleOptions() {
            const modal = document.getElementById('scheduleOptionsModal');
            if (modal) {
                modal.remove();
            }
            deactivateMenuButton('schedule');
        }

        function openScheduleLink(phase) {
            const scheduleLinks = {
                'phase1': 'https://form.naver.com/response/ktPwJoHoW2VFRo8AUa6yrg',
                'phase2': 'detailed_schedule', // ìƒì„¸ ì¼ì • í‘œì‹œ
                'phase3': 'https://www.aisummit.co.kr/'
            };
            
            const phaseNames = {
                'phase1': '1ì°¨ ì—­ëŸ‰ê°•í™” ì›Œí¬ìƒµ',
                'phase2': '2ì°¨ ì†Œí†µê°•í™” ì›Œí¬ìƒµ',
                'phase3': '3ì°¨ 2025ì„œë°‹ì„œìš¸ì•¤ì—‘ìŠ¤í¬2025 ì„¸ë¯¸ë‚˜'
            };
            
            if (phase === 'phase2') {
                showDetailedSchedule();
            } else if (scheduleLinks[phase]) {
                window.open(scheduleLinks[phase], '_blank');
            } else {
                alert(phaseNames[phase] + ' ì¼ì • ë§í¬ê°€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
            }
            closeScheduleOptions();
        }

        // 2ì°¨ ì›Œí¬ìƒµ ìƒì„¸ ì¼ì • í‘œì‹œ
        function showDetailedSchedule() {
            const detailedScheduleHTML = `
                <div class="modal" id="detailedScheduleModal" style="display: block;">
                    <div class="modal-content" style="max-width: 90%; max-height: 90%; overflow-y: auto;">
                        <button class="close-btn" onclick="closeDetailedSchedule()">&times;</button>
                        <div class="modal-header">
                            <h3>2ì°¨ ì†Œí†µê°•í™” ì›Œí¬ìƒµ ìƒì„¸ì¼ì •</h3>
                            <p style="color: #667eea; font-weight: 500;">ë¶€ì—¬êµ° ì†Œí†µê°•í™” ì›Œí¬ìƒµ</p>
                        </div>
                        <div style="padding: 20px;">
                            <!-- 1ì¼ì°¨ ì¼ì • -->
                            <div class="schedule-day">
                                <h4 style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px; border-radius: 8px; margin-bottom: 15px; text-align: center;">
                                    1day
                                </h4>
                                <div class="schedule-items">
                                    <div class="schedule-item">
                                        <div class="time">14:50</div>
                                        <div class="activity">ì½”ë¹„ ì§‘í•©</div>
                                        <div class="location">ë¶€ì—¬ë°±ì œë§ˆë¦¬ì¡°íŠ¸</div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">15:10</div>
                                        <div class="activity">ì²´í¬ì¸ ë° ë°©ë°°ì •</div>
                                        <div class="location">êµ¬ë“œë ˆì„ ì‹ë‹¹</div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">15:20</div>
                                        <div class="activity">í™˜ë³µí›„ë¹„</div>
                                        <div class="location">ë£¸ì†Œì‚°ì¥</div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">15:50</div>
                                        <div class="activity">'ìˆ¨ë‹ˆì€ ë¯¼ì†ì˜ ê°€ëŒê³¨'<br>(ì„ í™”ì™• > ë‚™í™”ì•” > ê³ ë€ì‚¬ íƒë°©)</div>
                                        <div class="location">êµ¬ë“œë ˆì„ ì‹ë‹¹</div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">16:30</div>
                                        <div class="activity">ì´ì˜ì‹œ ë²„ë«ê³¼ ë§Œë“¤ê¸°<br>'ì¶©ë‚¨ì—ì´ìŠ¤ ê°€ëŒê³¨'</div>
                                        <div class="location">ìŠ¤í‚¤ì¥YM5</div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">17:20</div>
                                        <div class="activity">ì§€ì˜íƒˆ ììœ ì‹œê°„</div>
                                        <div class="location"></div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">18:30</div>
                                        <div class="activity">ì €ë…ì‹ì‚¬</div>
                                        <div class="location">ì„œë™í•œì˜¥ êµ¬ì…ì›</div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">21:00</div>
                                        <div class="activity">íšŒì‹ ë° êµì¬ì—ì´ìŠ¤<br>'ì•ˆì£¼ ì‚¬ë‘í†¡ëª…'</div>
                                        <div class="location">ë¶€ì—¬ë°±ì œë§ˆë¦¬ì¡°íŠ¸</div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">22:00</div>
                                        <div class="activity">ììœ íœ´ì‹</div>
                                        <div class="location"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- 2ì¼ì°¨ ì¼ì • -->
                            <div class="schedule-day" style="margin-top: 30px;">
                                <h4 style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px; border-radius: 8px; margin-bottom: 15px; text-align: center;">
                                    2day
                                </h4>
                                <div class="schedule-items">
                                    <div class="schedule-item">
                                        <div class="time">11:00</div>
                                        <div class="activity">ì•„ì¹¨ì› ì ì‹¬ì‹ì‚¬</div>
                                        <div class="location">ì¹¨ì§„ì›ë•ìš°</div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">12:30</div>
                                        <div class="activity">ë¶€êµ½ë¡œ ì§‘í•©</div>
                                        <div class="location"></div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">12:30</div>
                                        <div class="activity">2024 ì‹¤ë²„ì¸ ì‹ì‚¬</div>
                                        <div class="location"></div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">13:10</div>
                                        <div class="activity">3í˜‘ ê³µìœ ì‹œê°„</div>
                                        <div class="location">ì„œë²„123ì² ì»¤í…í„°</div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">13:30</div>
                                        <div class="activity">2í˜‘ ê³µìœ ì‹œê°„</div>
                                        <div class="location"></div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">13:50</div>
                                        <div class="activity">1í˜‘ ê³µìœ ì‹œê°„</div>
                                        <div class="location"></div>
                                    </div>
                                    <div class="schedule-item">
                                        <div class="time">14:10</div>
                                        <div class="activity">ë§ˆë¬´ë¦¬</div>
                                        <div class="location"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <style>
                .schedule-item {
                    display: flex;
                    align-items: flex-start;
                    padding: 12px 0;
                    border-bottom: 1px solid #eee;
                }
                .schedule-item:last-child {
                    border-bottom: none;
                }
                .schedule-item .time {
                    width: 60px;
                    font-weight: 600;
                    color: #667eea;
                    flex-shrink: 0;
                }
                .schedule-item .activity {
                    flex: 1;
                    margin: 0 15px;
                    line-height: 1.4;
                    font-weight: 500;
                }
                .schedule-item .location {
                    width: 120px;
                    color: #666;
                    font-size: 0.9em;
                    text-align: right;
                    flex-shrink: 0;
                }
                .schedule-day {
                    margin-bottom: 20px;
                }
                </style>
            `;
            
            document.body.insertAdjacentHTML('beforeend', detailedScheduleHTML);
        }

        function closeDetailedSchedule() {
            const modal = document.getElementById('detailedScheduleModal');
            if (modal) {
                modal.remove();
            }
        }

        // íˆ¬ì–´íŒ¨ìŠ¤ ë³´ê´€í•¨ - ê°œì„ ëœ ë§í¬ ê´€ë¦¬
        function showAddLinkForm() {
            document.getElementById('addLinkForm').style.display = 'block';
            document.getElementById('linkTitle').focus();
        }

        function cancelAddLink() {
            document.getElementById('addLinkForm').style.display = 'none';
            clearLinkForm();
        }

        function clearLinkForm() {
            document.getElementById('linkTitle').value = '';
            document.getElementById('linkUrl').value = '';
            document.getElementById('linkPassword').value = '';
        }

        function saveNewLink() {
            const title = document.getElementById('linkTitle').value.trim();
            const url = document.getElementById('linkUrl').value.trim();
            const password = document.getElementById('linkPassword').value.trim();
            
            if (!title) {
                alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!url) {
                alert('URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // URL í˜•ì‹ ê²€ì¦
            if (!isValidUrl(url)) {
                alert('ì˜¬ë°”ë¥¸ URL í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”. (ì˜ˆ: https://example.com)');
                return;
            }
            
            const links = JSON.parse(localStorage.getItem('tourpassLinks') || '[]');
            const newLink = {
                id: Date.now(),
                title: title,
                url: url,
                password: password || null,
                createdAt: new Date().toISOString(),
                locked: false
            };
            
            links.push(newLink);
            localStorage.setItem('tourpassLinks', JSON.stringify(links));
            
            updateLinksList();
            cancelAddLink();
            
            alert('ë§í¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        function addNewLink() {
            // ê¸°ì¡´ í•¨ìˆ˜ëŠ” ìƒˆë¡œìš´ í¼ ë°©ì‹ìœ¼ë¡œ ëŒ€ì²´
            showAddLinkForm();
        }

        function updateLinksList() {
            const linksList = document.getElementById('linksList');
            const links = JSON.parse(localStorage.getItem('tourpassLinks') || '[]');
            
            if (links.length === 0) {
                linksList.innerHTML = '<div style="text-align: center; padding: 40px; color: #666;">' +
                    '<i class="fas fa-inbox" style="font-size: 3em; margin-bottom: 15px;"></i>' +
                    '<p>ì €ì¥ëœ ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>';
                return;
            }
            
            linksList.innerHTML = links.map(function(link) {
                return '<div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 10px;">' +
                    '<div style="flex: 1;"><div style="font-weight: 600;">' + link.title + '</div>' +
                    '<div style="font-size: 0.8em; color: #666;">' + link.url + '</div></div>' +
                    '<div><button onclick="openLink(' + link.id + ')" style="background: #667eea; color: white; border: none; padding: 6px 10px; border-radius: 4px; cursor: pointer; margin-left: 5px;">' +
                    '<i class="fas fa-external-link-alt"></i></button></div></div>';
            }).join('');
        }

        function openLink(linkId) {
            const links = JSON.parse(localStorage.getItem('tourpassLinks') || '[]');
            const link = links.find(function(l) { return l.id === linkId; });
            
            if (link) {
                window.open(link.url, '_blank');
            }
        }

        // íˆ¬ì–´íŒ¨ìŠ¤ í‹°ì¼“ ê¸°ëŠ¥
        function openTourpassTicket() {
            activateMenuButton('ticket');
            
            const links = JSON.parse(localStorage.getItem('tourpassLinks') || '[]');
            
            if (links.length === 0) {
                alert('ì €ì¥ëœ íˆ¬ì–´íŒ¨ìŠ¤ ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤.\në¨¼ì € íˆ¬ì–´íŒ¨ìŠ¤ ë³´ê´€í•¨ì— ë§í¬ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.');
                deactivateMenuButton('ticket');
                return;
            }
            
            // ê¸°ë³¸ íˆ¬ì–´íŒ¨ìŠ¤ í™•ì¸
            const defaultTicket = localStorage.getItem('defaultTourpass');
            
            if (defaultTicket) {
                const defaultLink = links.find(link => link.id == defaultTicket);
                if (defaultLink) {
                    if (confirm(`ê¸°ë³¸ íˆ¬ì–´íŒ¨ìŠ¤ë¥¼ ì—´ê¹Œìš”?\n${defaultLink.title}`)) {
                        openLink(defaultLink.id);
                        deactivateMenuButton('ticket');
                        return;
                    }
                }
            }
            
            // íˆ¬ì–´íŒ¨ìŠ¤ ì„ íƒ ëª¨ë‹¬
            showTourpassSelector(links);
        }

        function showTourpassSelector(links) {
            const selectorHTML = `
                <div class="modal" id="tourpassSelectorModal" style="display: block;">
                    <div class="modal-content">
                        <button class="close-btn" onclick="closeTourpassSelector()">&times;</button>
                        <div class="modal-header">
                            <h3>ğŸ« íˆ¬ì–´íŒ¨ìŠ¤ ì„ íƒ</h3>
                        </div>
                        <div style="padding: 20px;">
                            <p style="margin-bottom: 15px; color: #666;">ì—´ê³  ì‹¶ì€ íˆ¬ì–´íŒ¨ìŠ¤ë¥¼ ì„ íƒí•˜ì„¸ìš”:</p>
                            ${links.map(link => `
                                <div class="tourpass-item" onclick="selectTourpass(${link.id})" style="display: flex; justify-content: space-between; align-items: center; padding: 12px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: all 0.3s ease;">
                                    <div>
                                        <div style="font-weight: 600;">${link.title}</div>
                                        <div style="font-size: 0.8em; color: #666;">${link.url}</div>
                                    </div>
                                    <div style="display: flex; gap: 5px;">
                                        <button onclick="event.stopPropagation(); setDefaultTourpass(${link.id})" style="background: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 0.7em;">
                                            ê¸°ë³¸ì„¤ì •
                                        </button>
                                        <button onclick="event.stopPropagation(); selectTourpass(${link.id})" style="background: #667eea; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 0.7em;">
                                            ì—´ê¸°
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                <style>
                .tourpass-item:hover {
                    background: #f0f0ff;
                    border-color: #667eea;
                }
                </style>
            `;
            
            document.body.insertAdjacentHTML('beforeend', selectorHTML);
        }

        function selectTourpass(linkId) {
            openLink(linkId);
            closeTourpassSelector();
        }

        function setDefaultTourpass(linkId) {
            localStorage.setItem('defaultTourpass', linkId);
            alert('ê¸°ë³¸ íˆ¬ì–´íŒ¨ìŠ¤ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤!');
            closeTourpassSelector();
        }

        function closeTourpassSelector() {
            const modal = document.getElementById('tourpassSelectorModal');
            if (modal) {
                modal.remove();
            }
            deactivateMenuButton('ticket');
        }

        // ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ ê¸°ëŠ¥
        let gameState = {
            opponent: null,
            myChoice: null,
            opponentChoice: null,
            gameStarted: false
        };

        function showParticipantsList() {
            document.getElementById('participantsTab').className = 'tab-btn active';
            document.getElementById('gameTab').className = 'tab-btn';
            document.getElementById('participantsTab').style.cssText = 'background: #667eea; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;';
            document.getElementById('gameTab').style.cssText = 'background: #f8f9fa; color: #333; border: 1px solid #ddd; padding: 8px 15px; border-radius: 4px; cursor: pointer;';
            
            document.getElementById('participantsContent').style.display = 'block';
            document.getElementById('gameContent').style.display = 'none';
        }

        function showRockPaperScissors() {
            document.getElementById('gameTab').className = 'tab-btn active';
            document.getElementById('participantsTab').className = 'tab-btn';
            document.getElementById('gameTab').style.cssText = 'background: #667eea; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;';
            document.getElementById('participantsTab').style.cssText = 'background: #f8f9fa; color: #333; border: 1px solid #ddd; padding: 8px 15px; border-radius: 4px; cursor: pointer;';
            
            document.getElementById('participantsContent').style.display = 'none';
            document.getElementById('gameContent').style.display = 'block';
            
            loadOpponentsList();
        }

        function loadOpponentsList() {
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë‚˜ ë°±ì—”ë“œì—ì„œ ì°¸ê°€ì ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
            const participants = [
                'ë‚¨ë„í˜„', 'ê¹€ìˆ˜ì¸', 'ê³ ë‹¤í˜„', 'ì‹¬ì¬í˜¸', 'íŒí‹°ë‹ˆì•ˆ', 
                'ê¹€í˜„ì² ', 'ì´ìœ ì§„', 'ì •ì–´ì§„', 'ì¥ì›ì¤€', 'ê¹€ëŒ€ì§„', 
                'ì†í˜„ìš°', 'ì´ì£¼ì•„', 'ì¥ì€ì§„'
            ];
            
            const opponentSelect = document.getElementById('opponentSelect');
            opponentSelect.innerHTML = '<option value="">ìƒëŒ€ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>';
            
            participants.forEach(participant => {
                if (participant !== currentUser.name) {
                    const option = document.createElement('option');
                    option.value = participant;
                    option.textContent = participant;
                    opponentSelect.appendChild(option);
                }
            });
            
            opponentSelect.addEventListener('change', function() {
                if (this.value) {
                    startGame(this.value);
                }
            });
        }

        function startGame(opponentName) {
            gameState.opponent = opponentName;
            gameState.gameStarted = true;
            
            document.getElementById('gameArea').style.display = 'block';
            document.getElementById('myName').textContent = currentUser.name;
            document.getElementById('opponentName').textContent = opponentName;
            document.getElementById('gameResult').style.display = 'none';
            
            resetChoices();
        }

        function makeChoice(choice) {
            if (!gameState.gameStarted) return;
            
            gameState.myChoice = choice;
            gameState.opponentChoice = getRandomChoice();
            
            // ì„ íƒ í‘œì‹œ
            const choices = {
                'rock': 'âœŠ',
                'paper': 'âœ‹', 
                'scissors': 'âœŒï¸'
            };
            
            document.getElementById('myChoice').textContent = choices[gameState.myChoice];
            
            // ìƒëŒ€ë°© ì„ íƒ ì• ë‹ˆë©”ì´ì…˜
            animateOpponentChoice(choices[gameState.opponentChoice]);
        }

        function animateOpponentChoice(finalChoice) {
            const opponentChoiceElement = document.getElementById('opponentChoice');
            const choices = ['âœŠ', 'âœ‹', 'âœŒï¸'];
            let animationCount = 0;
            
            const animation = setInterval(() => {
                opponentChoiceElement.textContent = choices[Math.floor(Math.random() * 3)];
                animationCount++;
                
                if (animationCount >= 6) {
                    clearInterval(animation);
                    opponentChoiceElement.textContent = finalChoice;
                    showResult();
                }
            }, 200);
        }

        function getRandomChoice() {
            const choices = ['rock', 'paper', 'scissors'];
            return choices[Math.floor(Math.random() * 3)];
        }

        function showResult() {
            const result = determineWinner(gameState.myChoice, gameState.opponentChoice);
            const resultElement = document.getElementById('gameResult');
            const resultTextElement = document.getElementById('resultText');
            const resultDetailElement = document.getElementById('resultDetail');
            
            resultElement.style.display = 'block';
            
            if (result === 'win') {
                resultTextElement.textContent = 'ğŸ‰ ìŠ¹ë¦¬!';
                resultTextElement.style.color = '#28a745';
                resultDetailElement.textContent = `${currentUser.name}ë‹˜ì´ ì´ê²¼ìŠµë‹ˆë‹¤!`;
            } else if (result === 'lose') {
                resultTextElement.textContent = 'ğŸ˜… íŒ¨ë°°!';
                resultTextElement.style.color = '#dc3545';
                resultDetailElement.textContent = `${gameState.opponent}ë‹˜ì´ ì´ê²¼ìŠµë‹ˆë‹¤!`;
            } else {
                resultTextElement.textContent = 'ğŸ¤ ë¬´ìŠ¹ë¶€!';
                resultTextElement.style.color = '#6c757d';
                resultDetailElement.textContent = 'ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!';
            }
        }

        function determineWinner(myChoice, opponentChoice) {
            if (myChoice === opponentChoice) return 'draw';
            
            const winConditions = {
                'rock': 'scissors',
                'paper': 'rock',
                'scissors': 'paper'
            };
            
            return winConditions[myChoice] === opponentChoice ? 'win' : 'lose';
        }

        function resetGame() {
            resetChoices();
            document.getElementById('gameResult').style.display = 'none';
            document.getElementById('opponentSelect').value = '';
            document.getElementById('gameArea').style.display = 'none';
            gameState = {
                opponent: null,
                myChoice: null,
                opponentChoice: null,
                gameStarted: false
            };
        }

        function resetChoices() {
            document.getElementById('myChoice').textContent = 'â“';
            document.getElementById('opponentChoice').textContent = 'â“';
        }

        // ì•± ë²ˆì—­
        function translateApp() {
            const selectedLanguage = document.getElementById('languageSelect').value;
            
            const translations = {
                'ko': {
                    appTitle: 'íˆ¬ì–´íŒ¨ìŠ¤ì‚¬ì—…ë¶€ 2025 ì›Œí¬ìƒµ',
                    appSubtitle: 'TRAVEL SHIFT',
                    connectionOnline: 'ì˜¨ë¼ì¸',
                    connectionOffline: 'ì˜¤í”„ë¼ì¸',
                    connectionChecking: 'ì—°ê²° í™•ì¸ ì¤‘...',
                    syncText: 'ë™ê¸°í™”: ',
                    loginBtnText: 'Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸',
                    loginDescription: 'ì›Œí¬ìƒµ ì°¸ì—¬ë¥¼ ìœ„í•´ êµ¬ê¸€ ê³„ì • ì—°ë™ì´ í•„ìš”í•©ë‹ˆë‹¤',
                    menuItems: {
                        participants: 'ì°¸ê°€ì í˜„í™©',
                        participantsDesc: 'ì‹¤ì‹œê°„ ì°¸ê°€ì ì •ë³´ í™•ì¸',
                        schedule: 'ì›Œí¬ìƒµ ì¼ì •',
                        scheduleDesc: 'ìƒì„¸ ì¼ì • ë° í”„ë¡œê·¸ë¨',
                        mbti: 'MBTI ê²€ì‚¬',
                        mbtiDesc: 'ì„±ê²© ìœ í˜• ê²€ì‚¬ ì‹¤ì‹œ',
                        ticket: 'ì‚¬ìš© ì¤‘ì¸ íˆ¬ì–´íŒ¨ìŠ¤ ì—´ê¸°',
                        ticketDesc: 'ì§€ì •ëœ íˆ¬ì–´íŒ¨ìŠ¤ ë§í¬ ì—°ê²°',
                        survey: 'ì„¤ë¬¸ì¡°ì‚¬',
                        surveyDesc: 'ì›Œí¬ìƒµ ë§Œì¡±ë„ ì¡°ì‚¬',
                        tourpassBox: 'íˆ¬ì–´íŒ¨ìŠ¤ ë³´ê´€í•¨',
                        tourpassBoxDesc: 'ê°œì¸ ë§í¬ ì €ì¥ì†Œ'
                    },
                    translateTitle: 'ì•± ë²ˆì—­í•˜ê¸°',
                    translateDesc: 'ì–¸ì–´ë¥¼ ì„ íƒí•˜ë©´ ì•± ì „ì²´ê°€ ë²ˆì—­ë©ë‹ˆë‹¤'
                },
                'en': {
                    appTitle: 'TourPass Business Unit 2025 Workshop',
                    appSubtitle: 'TRAVEL SHIFT',
                    connectionOnline: 'Online',
                    connectionOffline: 'Offline',
                    connectionChecking: 'Checking connection...',
                    syncText: 'Sync: ',
                    loginBtnText: 'Sign in with Google',
                    loginDescription: 'Google account integration required for workshop participation',
                    menuItems: {
                        participants: 'Participants',
                        participantsDesc: 'Real-time participant information',
                        schedule: 'Workshop Schedule',
                        scheduleDesc: 'Detailed schedule and programs',
                        mbti: 'MBTI Test',
                        mbtiDesc: 'Personality type assessment',
                        ticket: 'Open TourPass in Use',
                        ticketDesc: 'Connect to designated TourPass link',
                        survey: 'Survey',
                        surveyDesc: 'Workshop satisfaction survey',
                        tourpassBox: 'TourPass Storage',
                        tourpassBoxDesc: 'Personal link storage'
                    },
                    translateTitle: 'App Translation',
                    translateDesc: 'Select a language to translate the entire app'
                },
                'ja': {
                    appTitle: 'ãƒ„ã‚¢ãƒ¼ãƒ‘ã‚¹äº‹æ¥­éƒ¨ 2025 ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—',
                    appSubtitle: 'TRAVEL SHIFT',
                    connectionOnline: 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³',
                    connectionOffline: 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³',
                    connectionChecking: 'æ¥ç¶šç¢ºèªä¸­...',
                    syncText: 'åŒæœŸ: ',
                    loginBtnText: 'Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³',
                    loginDescription: 'ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—å‚åŠ ã«ã¯Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºãŒå¿…è¦ã§ã™',
                    menuItems: {
                        participants: 'å‚åŠ è€…ç¾æ³',
                        participantsDesc: 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‚åŠ è€…æƒ…å ±ç¢ºèª',
                        schedule: 'ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—æ—¥ç¨‹',
                        scheduleDesc: 'è©³ç´°æ—¥ç¨‹ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ',
                        mbti: 'MBTIæ¤œæŸ»',
                        mbtiDesc: 'æ€§æ ¼ã‚¿ã‚¤ãƒ—æ¤œæŸ»å®Ÿæ–½',
                        ticket: 'ä½¿ç”¨ä¸­ã®ãƒ„ã‚¢ãƒ¼ãƒ‘ã‚¹ã‚’é–‹ã',
                        ticketDesc: 'æŒ‡å®šã•ã‚ŒãŸãƒ„ã‚¢ãƒ¼ãƒ‘ã‚¹ãƒªãƒ³ã‚¯æ¥ç¶š',
                        survey: 'ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆèª¿æŸ»',
                        surveyDesc: 'ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—æº€è¶³åº¦èª¿æŸ»',
                        tourpassBox: 'ãƒ„ã‚¢ãƒ¼ãƒ‘ã‚¹ä¿ç®¡ç®±',
                        tourpassBoxDesc: 'å€‹äººãƒªãƒ³ã‚¯ä¿å­˜æ‰€'
                    },
                    translateTitle: 'ã‚¢ãƒ—ãƒªç¿»è¨³',
                    translateDesc: 'è¨€èªã‚’é¸æŠã™ã‚‹ã¨ã‚¢ãƒ—ãƒªå…¨ä½“ãŒç¿»è¨³ã•ã‚Œã¾ã™'
                },
                'zh': {
                    appTitle: 'æ—…æ¸¸é€šè¡Œè¯äº‹ä¸šéƒ¨ 2025 ç ”ä¹ ç­',
                    appSubtitle: 'TRAVEL SHIFT',
                    connectionOnline: 'åœ¨çº¿',
                    connectionOffline: 'ç¦»çº¿',
                    connectionChecking: 'æ£€æŸ¥è¿æ¥ä¸­...',
                    syncText: 'åŒæ­¥: ',
                    loginBtnText: 'ä½¿ç”¨Googleè´¦æˆ·ç™»å½•',
                    loginDescription: 'å‚åŠ ç ”ä¹ ç­éœ€è¦Googleè´¦æˆ·é›†æˆ',
                    menuItems: {
                        participants: 'å‚åŠ è€…ç°çŠ¶',
                        participantsDesc: 'å®æ—¶å‚åŠ è€…ä¿¡æ¯ç¡®è®¤',
                        schedule: 'ç ”ä¹ ç­æ—¥ç¨‹',
                        scheduleDesc: 'è¯¦ç»†æ—¥ç¨‹å’Œé¡¹ç›®',
                        mbti: 'MBTIæµ‹è¯•',
                        mbtiDesc: 'æ€§æ ¼ç±»å‹æµ‹è¯•å®æ–½',
                        ticket: 'æ‰“å¼€ä½¿ç”¨ä¸­çš„æ—…æ¸¸é€šè¡Œè¯',
                        ticketDesc: 'è¿æ¥æŒ‡å®šçš„æ—…æ¸¸é€šè¡Œè¯é“¾æ¥',
                        survey: 'é—®å·è°ƒæŸ¥',
                        surveyDesc: 'ç ”ä¹ ç­æ»¡æ„åº¦è°ƒæŸ¥',
                        tourpassBox: 'æ—…æ¸¸é€šè¡Œè¯ä¿ç®¡ç®±',
                        tourpassBoxDesc: 'ä¸ªäººé“¾æ¥å­˜å‚¨'
                    },
                    translateTitle: 'åº”ç”¨ç¿»è¯‘',
                    translateDesc: 'é€‰æ‹©è¯­è¨€å³å¯ç¿»è¯‘æ•´ä¸ªåº”ç”¨'
                }
            };
            
            const t = translations[selectedLanguage];
            
            if (t) {
                // í—¤ë” ë²ˆì—­
                document.querySelector('.app-title').textContent = t.appTitle;
                document.querySelector('.app-subtitle').textContent = t.appSubtitle;
                
                // ì—°ê²° ìƒíƒœ ë²ˆì—­
                const connectionText = document.getElementById('connectionText');
                if (connectionText.textContent === 'ì˜¨ë¼ì¸' || connectionText.textContent === 'Online' || connectionText.textContent === 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³' || connectionText.textContent === 'åœ¨çº¿') {
                    connectionText.textContent = t.connectionOnline;
                } else if (connectionText.textContent === 'ì˜¤í”„ë¼ì¸' || connectionText.textContent === 'Offline' || connectionText.textContent === 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³' || connectionText.textContent === 'ç¦»çº¿') {
                    connectionText.textContent = t.connectionOffline;
                } else {
                    connectionText.textContent = t.connectionChecking;
                }
                
                // ë¡œê·¸ì¸ ë²„íŠ¼ ë²ˆì—­
                const loginBtn = document.getElementById('googleLoginBtn');
                if (loginBtn && loginBtn.innerHTML.indexOf('spinner') === -1) {
                    loginBtn.innerHTML = '<i class="fab fa-google"></i> ' + t.loginBtnText;
                }
                
                // ë¡œê·¸ì¸ ì„¤ëª… ë²ˆì—­
                const loginDesc = document.querySelector('.google-login p');
                if (loginDesc) {
                    loginDesc.textContent = t.loginDescription;
                }
                
                // ë©”ë‰´ í•­ëª© ë²ˆì—­
                const menuItems = document.querySelectorAll('.menu-item');
                const menuKeys = ['participants', 'schedule', 'mbti', 'ticket', 'survey', 'tourpassBox'];
                
                menuItems.forEach(function(item, index) {
                    if (menuKeys[index] && t.menuItems[menuKeys[index]]) {
                        const titleElement = item.querySelector('.menu-title');
                        const descElement = item.querySelector('.menu-desc');
                        
                        if (titleElement) {
                            titleElement.textContent = t.menuItems[menuKeys[index]];
                        }
                        if (descElement) {
                            descElement.textContent = t.menuItems[menuKeys[index] + 'Desc'];
                        }
                    }
                });
                
                // ë²ˆì—­ ì„¹ì…˜ ì œëª© ë²ˆì—­
                const translateTitle = document.querySelector('.app-translate h4');
                if (translateTitle) {
                    translateTitle.innerHTML = 'ğŸŒ ' + t.translateTitle;
                }
                
                const translateDesc = document.querySelector('.app-translate > div:last-child');
                if (translateDesc) {
                    translateDesc.textContent = t.translateDesc;
                }
                
                // ë™ê¸°í™” í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
                const lastSyncElement = document.getElementById('lastSync');
                if (lastSyncElement) {
                    const currentTime = lastSyncElement.textContent.split(': ')[1] || '-';
                    lastSyncElement.textContent = t.syncText + currentTime;
                }
                
                // ì–¸ì–´ë³„ ì„±ê³µ ë©”ì‹œì§€
                const messages = {
                    'ko': 'í•œêµ­ì–´ë¡œ ë²ˆì—­ë˜ì—ˆìŠµë‹ˆë‹¤',
                    'en': 'Translated to English',
                    'ja': 'æ—¥æœ¬èªã«ç¿»è¨³ã•ã‚Œã¾ã—ãŸ',
                    'zh': 'å·²ç¿»è¯‘ä¸ºä¸­æ–‡'
                };
                
                alert(messages[selectedLanguage]);
            }
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            document.getElementById('googleLoginBtn').addEventListener('click', googleLogin);
        });
    </script>
</body>
</html>
